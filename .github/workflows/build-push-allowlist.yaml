# cspell:word buildx
#
# Build and push muslrust-chef Docker image to Docker Hub whenever
# a tag is pushed that matches the pattern allowlist-v*
---
jobs:
  build-push-allowlist:
    runs-on: 'ubuntu-latest'
    steps:
    - uses: 'actions/checkout@v4'
    - uses: 'docker/setup-qemu-action@v3'
    - uses: 'docker/setup-buildx-action@v3'
    - uses: 'docker/build-push-action@v6'
      with:
        cache-from: 'type=gha'
        cache-to: 'type=gha,mode=max'
        context: './src'
        file: 'src/allowlist/Dockerfile'
        platforms: '${{ vars.MUSLRUST_PLATFORMS }}'
name: 'Build allowlist and push to Docker Hub'
'on':
  workflow_dispatch: null
...
